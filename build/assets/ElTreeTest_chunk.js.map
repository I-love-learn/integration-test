{"version":3,"file":"ElTreeTest_chunk.js","sources":["../../src/views/el/ElTreeTest.vue"],"sourcesContent":["<script setup>\r\n// el-tree的数据\r\n\r\nconst treeData = reactive({\r\n  data: [\r\n    {\r\n      label: \"白鹿原\",\r\n      value: \"1\",\r\n      id: 100,\r\n      children: [\r\n        {\r\n          label: \"白嘉轩\",\r\n          value: \"1-1\",\r\n          id: 2,\r\n          children: [\r\n            {\r\n              label: \"白孝文\",\r\n              value: \"1-1-1\",\r\n              id: 4\r\n            },\r\n            {\r\n              label: \"白孝武\",\r\n              value: \"1-1-2\",\r\n              id: 5\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          label: \"鹿子霖\",\r\n          value: \"1-2\",\r\n          id: 3,\r\n          children: [\r\n            {\r\n              label: \"鹿兆鹏\",\r\n              value: \"1-2-1\",\r\n              id: 6\r\n            },\r\n            {\r\n              label: \"鹿兆海\",\r\n              value: \"1-2-2\",\r\n              id: 7\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n})\r\n\r\nconst currentKey = ref(5)\r\n\r\nfunction dataChange() {\r\n  treeData.data = [\r\n    {\r\n      label: \"三国演义\",\r\n      value: \"1\",\r\n      id: 1,\r\n      children: [\r\n        {\r\n          label: \"刘备\",\r\n          value: \"1-1\",\r\n          id: 2,\r\n          children: [\r\n            {\r\n              label: \"关羽\",\r\n              value: \"1-1-1\",\r\n              id: 4\r\n            },\r\n            {\r\n              label: \"张飞\",\r\n              value: \"1-1-2\",\r\n              id: 5\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          label: \"曹操\",\r\n          value: \"1-2\",\r\n          id: 3,\r\n          children: [\r\n            {\r\n              label: \"张郃\",\r\n              value: \"1-2-1\",\r\n              id: 6\r\n            },\r\n            {\r\n              label: \"典韦\",\r\n              value: \"1-2-2\",\r\n              id: 7\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n\r\nonBeforeMount(() => {\r\n  currentKey.value = 6\r\n})\r\n\r\nconst expandedKeys = ref([3])\r\n\r\nfunction changeExpand() {\r\n  expandedKeys.value = [2]\r\n}\r\n\r\nconst defaultKeys = ref()\r\n</script>\r\n\r\n<template>\r\n  <!--     default-expand-all -->\r\n  <el-tree\r\n    :data=\"treeData.data\"\r\n    highlight-current\r\n    node-key=\"id\"\r\n    :current-node-key=\"currentKey\"\r\n    :default-expanded-keys=\"expandedKeys\"\r\n    show-checkbox\r\n    :default-checked-keys=\"defaultKeys\"\r\n  >\r\n    <template #default=\"{ node, data }\">\r\n      <span>{{ node.label }}</span>\r\n      <span style=\"margin-left: 10px\">{{ node.value }}</span>\r\n      <span style=\"margin-left: 10px\">{{ node.id }}</span>\r\n      <span style=\"margin-left: 10px\">{{ node.data.id }}</span>\r\n    </template>\r\n  </el-tree>\r\n  <el-card header=\"操作栏\">\r\n    <el-button @click=\"currentKey = 7\">换一个选中id</el-button>\r\n    <el-button @click=\"dataChange\">给树换一个数据</el-button>\r\n    <el-button @click=\"changeExpand\">换个默认展开</el-button>\r\n    <el-button @click=\"defaultKeys = [6, 7]\">换个默认勾选</el-button>\r\n  </el-card>\r\n  <p>\r\n    虽然highlight-current node-key current-node-key\r\n    可以决定树初始化时选中哪个节点\r\n    但是如果该节点默认没有default-expand-all被展开 的话 tree是不会自动展开的\r\n  </p>\r\n\r\n  <p>\r\n    current-node-key 控制的是默认选中节点 但是这个属性不是双向绑定的 因此\r\n    改变current-node-key会改变默认选中 但手动切换选中不会更新current-node-key\r\n    这就会出现上面的问题 如果我一开始给current-node-key赋值了通过按钮事件\r\n    后续自己手动切换后 再点击按钮 current-node-key还是没有改变 并且\r\n    tree不会切换选中id为7的节点\r\n  </p>\r\n\r\n  <p>\r\n    如果el-tree绑定的数据被重新赋值改变了，那么current-node-key会重新选中一开始初始化时\r\n    赋值的那个节点 也就是beforeMount时current-node-key的值\r\n    而beforeMount后重新赋值的current-node-key值改变不会影响绑定的数据重新赋值改变的current-node-key\r\n    但是如果数据被替换后又修改了current-node-key的话 对应的node 会被选中\r\n    初步猜测是子组件mounted时 存了旧的current-node-key作为初始值。\r\n  </p>\r\n\r\n  <p>这一点在el很多组件中 初始值都是如此设计的 比如form</p>\r\n\r\n  <p>\r\n    el-form data被重新赋值后 默认展开取得是最新得默认展开得值\r\n    而不会像默认选中一样取初始值。 并且如果 原先数据 展开了多个节点 替换数据后\r\n    只会展开 默认得节点\r\n  </p>\r\n\r\n  <p>default-expand-all 大于default-expanded-keys</p>\r\n  <p>默认勾选数据和默认展开一致 切换数据也以当前数据为准</p>\r\n\r\n  <p>\r\n    node.id是 el自己的id 自增生成的每次数据重新赋值 node.id都会自增\r\n    而node.data.id 才是自己的\r\n  </p>\r\n\r\n  <p>以上所有属性均不支持v-model</p>\r\n</template>\r\n"],"names":["treeData","reactive","currentKey","ref","dataChange","onBeforeMount","expandedKeys","changeExpand","defaultKeys"],"mappings":"kvDAGA,MAAMA,EAAWC,EAAS,CACxB,KAAM,CACJ,CACE,MAAO,MACP,MAAO,IACP,GAAI,IACJ,SAAU,CACR,CACE,MAAO,MACP,MAAO,MACP,GAAI,EACJ,SAAU,CACR,CACE,MAAO,MACP,MAAO,QACP,GAAI,CACL,EACD,CACE,MAAO,MACP,MAAO,QACP,GAAI,CACL,CACF,CACF,EACD,CACE,MAAO,MACP,MAAO,MACP,GAAI,EACJ,SAAU,CACR,CACE,MAAO,MACP,MAAO,QACP,GAAI,CACL,EACD,CACE,MAAO,MACP,MAAO,QACP,GAAI,CACL,CACF,CACF,CACF,CACF,CACF,CACH,CAAC,EAEKC,EAAaC,EAAI,CAAC,EAExB,SAASC,GAAa,CACpBJ,EAAS,KAAO,CACd,CACE,MAAO,OACP,MAAO,IACP,GAAI,EACJ,SAAU,CACR,CACE,MAAO,KACP,MAAO,MACP,GAAI,EACJ,SAAU,CACR,CACE,MAAO,KACP,MAAO,QACP,GAAI,CACL,EACD,CACE,MAAO,KACP,MAAO,QACP,GAAI,CACL,CACF,CACF,EACD,CACE,MAAO,KACP,MAAO,MACP,GAAI,EACJ,SAAU,CACR,CACE,MAAO,KACP,MAAO,QACP,GAAI,CACL,EACD,CACE,MAAO,KACP,MAAO,QACP,GAAI,CACL,CACF,CACF,CACF,CACF,CACF,CACH,CAEAK,EAAc,IAAM,CAClBH,EAAW,MAAQ,CACrB,CAAC,EAED,MAAMI,EAAeH,EAAI,CAAC,CAAC,CAAC,EAE5B,SAASI,GAAe,CACtBD,EAAa,MAAQ,CAAC,CAAC,CACzB,CAEA,MAAME,EAAcL,EAAK"}